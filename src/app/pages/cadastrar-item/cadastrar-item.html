<div class="page-container">

  <div class="layout-wrapper">

    @if (!tipoSelecionado) {
      <div class="cadastro-card">
        <h2 class="titulo-card">Escolha o Item que voce quer cadastrar</h2>
        <div class="lista-botoes">
          <button class="btn-opcao" (click)="selecionarTipo('COLECAO')">Coleção</button>
          <button class="btn-opcao" (click)="selecionarTipo('ESTAMPA')">Estampa</button>
          <button class="btn-opcao" (click)="selecionarTipo('ADESIVO')">Adesivo</button>
          <button class="btn-opcao" (click)="selecionarTipo('PECA')">Peça</button>
          <button class="btn-opcao" (click)="selecionarTipo('CHAVEIRO')">Chaveiro</button>
        </div>
      </div>
    }

    @else {

      <div class="banner-titulo">
        @if (tipoSelecionado === 'COLECAO') { Cadastrar Coleção }
        @if (tipoSelecionado === 'ESTAMPA') { Cadastrar Estampa }
        @if (tipoSelecionado === 'ADESIVO') { Cadastrar Adesivo }
        @if (tipoSelecionado === 'PECA') { Cadastrar Peça }
        @if (tipoSelecionado === 'CHAVEIRO') { Cadastrar Chaveiro }
      </div>

      <div class="cadastro-card">
        <form class="form-fields" (ngSubmit)="salvarItem()" #itemForm="ngForm">

          @if (tipoSelecionado === 'COLECAO') {
            <div class="input-group">
              <input type="text" placeholder="Nome da Coleção" [(ngModel)]="colecaoData.nome" name="colecaoNome" required>
            </div>
            <div class="input-group">
              <label for="dataInicio">Data de Início</label>
              <input id="dataInicio" type="date" [(ngModel)]="colecaoData.dataInicio" name="colecaoDataInicio" required>
            </div>
            <div class="input-group">
              <label for="dataFim">Data de Fim</label>
              <input id="dataFim" type="date" [(ngModel)]="colecaoData.dataFim" name="colecaoDataFim" required>
            </div>
          }

          @if (tipoSelecionado === 'ESTAMPA') {
            <div class="input-group">
              <input type="text" placeholder="Nome da Estampa" [(ngModel)]="estampaData.nome" name="estampaNome" required>
            </div>
            <div class="input-group">
              <input type="number" placeholder="Quantidade" [(ngModel)]="estampaData.quantidade" name="estampaQuantidade" min="0" required>
            </div>
            <div class="input-group">
              <select [(ngModel)]="estampaData.colecaoId" name="estampaColecaoId" required>
                <option value="" disabled selected>Selecione uma Coleção</option>
                @for (colecao of colecoes; track colecao.colecaoId) {
                  <option [value]="colecao.colecaoId">
                    {{ colecao.nome }}
                  </option>
                }
              </select>
            </div>
          }

          @if (tipoSelecionado === 'ADESIVO') {
            <div class="input-group">
              <input type="text" placeholder="Modelo do Adesivo" [(ngModel)]="adesivoData.adesivoModelo" name="adesivoModelo" required>
            </div>
            <div class="input-group checkbox-container">
              <label class="checkbox-label">
                <input type="checkbox" [(ngModel)]="adesivoData.cromatico" name="adesivoCromatico">
                <span class="checkmark"></span>
                Cromático
              </label>
            </div>
          }

          @if (tipoSelecionado === 'PECA') {
            <div class="input-group">
              <select [(ngModel)]="pecaData.tipo" name="pecaTipo" required>
                <option value="" disabled selected>Tipo da Peça</option>
                <option value="Calca">Calça</option>
                <option value="Camiseta">Camiseta</option>
                <option value="Polo">Polo</option>
                <option value="Moletom">Moletom</option>
                <option value="Casaco">Casaco</option>
              </select>
            </div>
            <div class="input-group">
              <select [(ngModel)]="pecaData.tamanho" name="pecaTamanho" required>
                <option value="" disabled selected>Tamanho</option>
                <option value="PP">PP</option>
                <option value="P">P</option>
                <option value="M">M</option>
                <option value="G">G</option>
                <option value="GG">GG</option>
              </select>
            </div>
            <div class="input-group">
              <select [(ngModel)]="pecaData.cor" name="pecaCor" required>
                <option value="" disabled selected>Cor</option>
                <option value="Preto">Preto</option>
                <option value="Branco">Branco</option>
                <option value="Azul">Azul</option>
                <option value="Vermelho">Vermelho</option>
                <option value="Verde">Verde</option>
                <option value="Amarelo">Amarelo</option>
                <option value="Rosa">Rosa</option>
                <option value="Cinza">Cinza</option>
                <option value="Marrom">Marrom</option>
                <option value="Laranja">Laranja</option>
                <option value="Roxo">Roxo</option>
              </select>
            </div>
            <div class="input-group">
              <input type="number" placeholder="Quantidade" [(ngModel)]="pecaData.quantidade" name="pecaQuantidade" min="0" required>
            </div>
          }

          @if (tipoSelecionado === 'CHAVEIRO') {
            <div class="input-group">
              <input type="text" placeholder="Modelo do Chaveiro" [(ngModel)]="chaveiroData.chaveiroModelo" name="chaveiroModelo" required>
            </div>
            <div class="input-group">
              <select [(ngModel)]="chaveiroData.colecaoId" name="chaveiroColecaoId" required>
                <option value="" disabled selected>Selecione uma Coleção</option>
                @for (colecao of colecoes; track colecao.colecaoId) {
                  <option [value]="colecao.colecaoId">
                    {{ colecao.nome }}
                  </option>
                }
              </select>
            </div>
          }

          <button type="submit" class="btn-salvar" [disabled]="salvando || !itemForm.valid">
            {{ salvando ? 'Salvando...' : 'Salvar' }}
          </button>

        </form>
      </div>
    }

  </div>

  <div class="container-voltar">
    @if (!tipoSelecionado) {
      <app-back-button></app-back-button>
    } @else {
      <button class="btn-voltar-menu" (click)="voltarParaMenu()">
        Voltar ao Menu
      </button>
    }
  </div>

</div>
